<mat-accordion class="form-view-accordian" multi>
  <mat-expansion-panel #lettingsDetails hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Letting Details
      </mat-panel-title>
      <mat-panel-description class="ion-justify-content-end no-margin">
        <div>
          <span *ngIf="!lettingsDetails.expanded"  class="accordian-icon" title="Expand">
            <ion-icon style="pointer-events:none"  name="add-circle"></ion-icon>
          </span>
          <span *ngIf="lettingsDetails.expanded" class="accordian-icon" title="Collapse">
            <ion-icon style="pointer-events:none"  name="remove-circle"></ion-icon>
            </span>
        </div>
      </mat-panel-description>
    </mat-expansion-panel-header>
      <form [formGroup]="group">
        <ion-grid id="property-letting-details">
          <ion-row>
            <ion-col size="33.33" class="no-padding">
              <ion-row>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Status</ion-label>
                    <ion-select formControlName="status" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of propertyStatuses">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Marketing Status</ion-label>
                    <ion-select formControlName="maStatus" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of propertyMarketingStatuses">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Office <ion-text class="mandatory">*</ion-text></ion-label>
                    <ion-select formControlName="officeCode" interface="popover" (ionChange)="getPropertyLocations(group.controls.officeCode.value)">
                      <ion-select-option [value]="item.index" *ngFor="let item of officeCodes">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                  <app-validation-message [control]="group.controls.officeCode"></app-validation-message>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Property Locations <ion-text class="mandatory">*</ion-text></ion-label>
                    <ion-select formControlName="propertyLocations" interface="popover" multiple>
                      <ion-select-option [value]="item.locationId" *ngFor="let item of propertyLocations">
                        {{item.locationDisplayAs}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                  <app-validation-message [control]="group.controls.propertyLocations"></app-validation-message>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Portfolio Source </ion-label>
                    <ion-select formControlName="portfolioSource" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of portfolioSources">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Reason to Let</ion-label>
                    <ion-select formControlName="lettingReason" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of propertyLetReasons">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="100">
                  <ion-item>
                    <ion-label position="floating">Area</ion-label>
                    <ion-select formControlName="area" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of propertyAreas">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="100">
                  <ion-item>
                    <ion-label position="floating">General Notes</ion-label>
                    <ion-textarea rows="1" formControlName="internalNote" auto-grow="true" class="reason">
                    </ion-textarea>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-col>
            <ion-col size="33.33" class="no-padding">
              <ion-row>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Service <ion-text class="mandatory">*</ion-text></ion-label>
                    <ion-select formControlName="managementType" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of managementTypes">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                  <app-validation-message [control]="group.controls.managementType"></app-validation-message>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Rent Category</ion-label>
                    <ion-select formControlName="rentCategory" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of rentCategories">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Acquisition Office</ion-label>
                    <ion-select formControlName="acquisitionOffice" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of acqisitionOffices">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Booking Office</ion-label>
                    <ion-select formControlName="bookingOfficeCode" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of officeCodes">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="50" class="ion-align-self-end">
                  <ion-item lines="none">
                    <ion-toggle formControlName="isOnWithOtherAgent" color="primary">
                    </ion-toggle>
                    <ion-text>On with Another Agent?</ion-text>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Agent Name</ion-label>
                    <ion-input formControlName="agentName"></ion-input>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Phone (1) </ion-label>
                    <ion-input formControlName="phoneOne"></ion-input>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Phone (2) </ion-label>
                    <ion-input formControlName="phoneTwo"></ion-input>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">File No. </ion-label>
                    <ion-input formControlName="fileNumber"></ion-input>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">A-Z Reference </ion-label>
                    <ion-input formControlName="azReference"></ion-input>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-col>
            <ion-col size="33.33" class="no-padding">
              <ion-row>
                <ion-col size="70">
                  <ion-item>
                    <ion-label position="floating">HMO Property Ref</ion-label>
                    <ion-input formControlName="hmoPropertyRef" [disabled]="!group.get('isHmoProperty').value"></ion-input>
                  </ion-item>
                </ion-col>
                <ion-col size="30" class="ion-align-self-end">
                  <ion-item lines="none">
                    <ion-toggle formControlName="isHmoProperty" color="primary"></ion-toggle>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Legacy Reference</ion-label>
                    <ion-input formControlName="legacyReference"></ion-input>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Member No</ion-label>
                    <ion-input formControlName="memberNo"></ion-input>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item id="appraisedDate">
                    <ion-label position="floating">Appraised</ion-label>
                    <ion-input value="{{ group.controls.appraisedDate.value | date: DATE_FORMAT.DATE }}"></ion-input>
                    <ion-icon name="calendar-outline" slot="end" class="ion-date-item-icon"></ion-icon>
                    <ion-popover class="ion-datepicker-popover" trigger="appraisedDate" show-backdrop="false">
                      <ng-template>
                        <ion-datetime showDefaultButtons="true" presentation="date" formControlName="appraisedDate">
                        </ion-datetime>
                      </ng-template>
                    </ion-popover>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item id="instructedDate">
                    <ion-label position="floating">Instructed</ion-label>
                    <ion-input value="{{ group.controls.instructedDate.value | date: DATE_FORMAT.DATE }}"></ion-input>
                    <ion-icon name="calendar-outline" slot="end" class="ion-date-item-icon"></ion-icon>
                    <ion-popover class="ion-datepicker-popover" trigger="instructedDate" show-backdrop="false">
                      <ng-template>
                        <ion-datetime showDefaultButtons="true" presentation="date" formControlName="instructedDate">
                        </ion-datetime>
                      </ng-template>
                    </ion-popover>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Marketing As</ion-label>
                    <ion-select formControlName="marketingAs" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of marketingAs">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Landlord Occupied</ion-label>
                    <ion-select formControlName="landlordOccupancy" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of landlordOccupancies">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
                <ion-col size="50">
                  <ion-item>
                    <ion-label position="floating">Withdrawn reason</ion-label>
                    <ion-select formControlName="withdrawnReason" interface="popover">
                      <ion-select-option [value]="item.index" *ngFor="let item of withdrawnReasons">
                        {{item.value}}
                      </ion-select-option>
                    </ion-select>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>
        </ion-grid>
      </form>
  </mat-expansion-panel>
</mat-accordion>