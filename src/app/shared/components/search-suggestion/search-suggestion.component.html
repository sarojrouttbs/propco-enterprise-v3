<ion-row class="{{serachResultPage}}"
  [ngClass]="pageType === 'dashboard' ? 'ion-align-items-center ion-justify-content-center ion-margin-vertical' : 
(pageType === 'solr-resultpage' ? 'ion-align-items-center main-row ion-justify-content-end ion-margin-vertical' : 'ion-align-items-center main-row agent-main-row ion-margin-vertical')">
  <ion-col *ngIf="!isEntityFinder" [size]="pageType == 'dashboard'?'12':'22'" class="solrMutiSelect ion-no-padding tour-1">
    <mat-form-field appearance="fill">
      <mat-select [formControl]="entityControl" (selectionChange)="onChangeEntity()" multiple
        class="mat-select-red solr-entity-selector ion-text-center">
        <mat-select-trigger style="width: 100;">
          {{entityControl.value ? entityControl.value[0]?.replace('_',' '): ''}}
          <span *ngIf="entityControl.value?.length > 1" class="example-additional-selection">
            +{{entityControl.value.length - 1}}
          </span>
        </mat-select-trigger>
        <mat-option class="red-text"  *ngFor="let topping of entityList" [value]="topping">{{topping?.replace('_',' ')}}</mat-option>
      </mat-select>
    </mat-form-field>
  </ion-col>
  <ion-col *ngIf="isEntityFinder" [size]="5" class="ion-no-padding tour-3 pointer">
    <i class="propcoicon no-background {{propcoIcon}} search-Finder "></i>
  </ion-col>
  <ion-col [size]="pageType == 'dashboard'?serachWidth:'70'" style="padding-right: 0;" class="ion-no-padding tour-2">
    <div>
      <ion-searchbar #solrSearchBar [(ngModel)]="searchTerm"
        [placeholder]="'Start typing to search ' + (entityControl.value.length ? ''+ (entityControl.value).join(',').replace('_',' ') + '':'')"
        class="searchbarCustom" debounce="500" (ionChange)="getItems($event)" [formControl]="searchTermControl"
        (ionBlur)="hideSuggestion()" (ionFocus)="suggestions.length > 0 ? isItemAvailable = true : false">
      </ion-searchbar>
      <ion-progress-bar color="danger" [type]="'indeterminate'" *ngIf="showLoader"
        style="position: absolute;"></ion-progress-bar>
      <ion-list *ngIf="isItemAvailable" class="solrSuggestionList" [class.solr-dashboard]="pageType === 'dashboard'">
        <ion-item *ngFor="let item of suggestions" class="solrSuggestionListItem">
          <ng-container [ngTemplateOutlet]="propertySuggestion" *ngIf="item?.entityType === 'PROPERTY'|| item?.entityType === 'SALES_PROPERTY'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
          <ng-container [ngTemplateOutlet]="landlordSuggestion" *ngIf="item?.entityType === 'LANDLORD'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
          <ng-container [ngTemplateOutlet]="applicantSuggestion" *ngIf="item?.entityType === 'APPLICANT'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
          <ng-container [ngTemplateOutlet]="tenantSuggestion"
            *ngIf="item?.entityType === 'TENANT' || item?.entityType === 'COTENANT'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
          <ng-container [ngTemplateOutlet]="contractorSuggestion" *ngIf="item?.entityType === 'CONTRACTOR'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
          <ng-container [ngTemplateOutlet]="agentSuggestion" *ngIf="item?.entityType === 'AGENT'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
          <ng-container [ngTemplateOutlet]="vendorSuggestion" *ngIf="item?.entityType === 'VENDOR'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
          <ng-container [ngTemplateOutlet]="purchaserSuggestion" *ngIf="item?.entityType === 'PURCHASER'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
          <ng-container [ngTemplateOutlet]="salesApplicantSuggestion" *ngIf="item?.entityType === 'SALES_APPLICANT'"
            [ngTemplateOutletContext]="{item:item}">
          </ng-container>
        </ion-item>
      </ion-list>
    </div>
  </ion-col>
  <ion-col [size]="pageType == 'dashboard'?'4':'8'" class="ion-no-padding tour-3 pointer">
    <ion-buttons end (click)="goToPage()">
      <i class="propcoicon propcoicon-search no-background red-icon search-icon"></i>
    </ion-buttons>
  </ion-col>
</ion-row>

<ng-template #propertySuggestion let-item="item">
  <div (click)="openHomeCategory(item?.entityType === 'PROPERTY'?'OpenProperty':'SalesOpenProperty',item)" style="width: 100%">
    <span>
      <i class="propcoicon no-background propcoicon-property red-icon"></i>
    </span>
    <span>{{officeLookupMap.get(item.office)}}</span>&nbsp;
    <span>{{item.address | slice:0:30}}, {{item.postcode}}</span>&nbsp;
    <span>{{item.reference}}</span>&nbsp;
    <span class=" ng-scope">{{item.propertyRent || 0 | currency : "Â£"}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>

<ng-template #landlordSuggestion let-item="item">
  <div (click)="openHomeCategory('OpenLandlord',item)" style="width: 100%">
    <span>
      <i class="propcoicon no-background propcoicon-landlord red-icon"></i>
    </span>
    <span>{{officeLookupMap.get(item.office)}}</span>&nbsp;
    <span>{{item.name}}</span>&nbsp;
    <span>{{item?.reference?.split(",")[0]}}</span>&nbsp;
    <span>{{item.address | slice:0:30}}, {{item.postcode}}</span>&nbsp;
    <span>{{item.daytime}}</span>&nbsp;
    <span>{{item.mobile}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>

<ng-template #applicantSuggestion let-item="item">
  <div (click)="openHomeCategory('OpenApplicant',item)" style="width: 100%">
    <span>
      <i class="propcoicon no-background propcoicon-applicant-let red-icon"></i>
    </span>
    <span>{{officeLookupMap.get(item.office)}}</span>&nbsp;
    <span>{{item.name}}</span>&nbsp;
    <span>{{item.reference}}</span>&nbsp;
    <span>{{item.address | slice:0:30}}, {{item.postcode}}</span>&nbsp;
    <span>{{item.daytime}}</span>&nbsp;
    <span>{{item.mobile}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>

<ng-template #tenantSuggestion let-item="item">
  <div (click)="openHomeCategory('OpenTenant',item)" style="width: 100%">
    <span>
      <i class="propcoicon no-background propcoicon-tenant red-icon"></i>
    </span>
    <span>{{item.name}}</span>&nbsp;
    <span>{{item.reference}}</span>&nbsp;
    <span>{{item.address | slice:0:30}}, {{item.postcode}}</span>&nbsp;
    <span>{{item.daytime}}</span>&nbsp;
    <span>{{item.mobile}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>

<ng-template #contractorSuggestion let-item="item">
  <div (click)="openHomeCategory('OpenContractor',item)" style="width: 100%">
    <span>
      <i class="propcoicon no-background propcoicon-contractor red-icon"></i>
    </span>
    <span>{{item.name}}</span>&nbsp;
    <span>{{item.reference}}</span>&nbsp;
    <span>{{item.address | slice:0:30}}, {{item.postcode}}</span>&nbsp;
    <span>{{item.daytime}}</span>&nbsp;
    <span>{{item.mobile}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>

<ng-template #agentSuggestion let-item="item">
  <div (click)="openHomeCategory('OpenAgent',item)" style="width:100%">
    <span>
      <i class="propcoicon no-background propcoicon-agent red-icon"></i>
    </span>
    <span>{{item.name}}</span>&nbsp;
    <span>{{item.reference}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>
<ng-template #vendorSuggestion let-item="item">
  <div (click)="openHomeCategory('OpenVendor',item)" style="width:100%">
    <span>
      <i class="propcoicon no-background propcoicon-vendor red-icon"></i>
    </span>
    <span>{{officeLookupMap.get(item.office)}}</span>&nbsp;
    <span>{{item.name}}</span>&nbsp;
    <span>{{item?.reference?.split(",")[0]}}</span>&nbsp;
    <span>{{item.address | slice:0:30}}, {{item.postcode}}</span>&nbsp;
    <span>{{item.mobile}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>
<ng-template #purchaserSuggestion let-item="item">
  <div (click)="openHomeCategory('OpenPurchaser',item)" style="width:100%">
    <span>
      <i class="propcoicon no-background propcoicon-purchaser red-icon"></i>
    </span>
    <span>{{officeLookupMap.get(item.office)}}</span>&nbsp;
    <span>{{item.name}}</span>&nbsp;
    <span>{{item?.reference?.split(",")[0]}}</span>&nbsp;
    <span>{{item.address | slice:0:30}}, {{item.postcode}}</span>&nbsp;
    <span>{{item.mobile}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>
<ng-template #salesApplicantSuggestion let-item="item">
  <div (click)="openHomeCategory('OpenSalesApplicant',item)" style="width:100%">
    <span>
      <i class="propcoicon no-background propcoicon-applicant-sale red-icon"></i>
    </span>
    <span>{{officeLookupMap.get(item.office)}}</span>&nbsp;
    <span>{{item.name}}</span>&nbsp;
    <span>{{item?.reference?.split(",")[0]}}</span>&nbsp;
    <span>{{item.address | slice:0:30}}, {{item.postcode}}</span>&nbsp;
    <span>{{item.mobile}}</span>&nbsp;
    <span class="text-color-lightgreen">{{item.status}}</span>
  </div>
</ng-template>
