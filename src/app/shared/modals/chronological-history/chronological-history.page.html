<ion-header>
    <ion-toolbar>
        <ion-title>Chronological History</ion-title>
        <ion-buttons slot="end">
            <ion-icon name="close" (click)="dismiss()"></ion-icon>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content id="chronological-history">
    <ion-grid>
        <ion-row>
            <ion-col>
                <ng-container *ngIf="isTableReady">
                    <div class="show-hide-section" *ngIf="eventList?.length > 0">
                        <ion-button size="small" (click)="showHideAll(showAll)"> {{ showAll ? 'Expand All' : 'Collapse All' }} </ion-button>
                    </div>
                    <div class="email-body-checkbox" *ngIf="eventList?.length > 0">
                        <label><input type="checkbox" class="email-body" [(ngModel)]="isEmailRequire" /> Include email body in
              export</label>
                    </div>
                    <table id="chronological" datatable [dtOptions]="dtOptions" class="row-border hover" style="border-spacing: 0 2px; ">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Date/Time</th>
                                <th scope="col">Action</th>
                                <th scope="col">Category</th>
                                <th scope="col" class="none">By</th>
                                <th scope="col" class="none">Closing Reason</th>
                                <th scope="col" class="none">Cli Action Selected</th>
                                <th scope="col" class="none">Status</th>
                                <th scope="col" class="none">Notification Id</th>
                                <th scope="col" class="none">Escalation Reason</th>
                                <th scope="col" class="none">Rejection Reason</th>
                                <th scope="col" class="none">Documents</th>
                                <th scope="col" class="none">Category</th>
                                <th scope="col" class="none">Note Description</th>
                                <th scope="col" class="none">Type</th>
                                <th scope="col" class="none">Question</th>
                                <th scope="col" class="none">Response Option</th>
                                <th scope="col" class="none">How</th>
                                <th scope="col" class="none">Recipient</th>
                                <th scope="col" class="none">Stage</th>
                                <th scope="col" class="none">From</th>
                                <th scope="col" class="none">To</th>
                                <th scope="col" class="none">Subject</th>
                                <th scope="col" class="none">Email</th>
                                <th scope="col" class="none">Snoozed Till</th>
                        </thead>
                        <tbody>
                            <tr *ngFor="let elem of eventList">
                                <td></td>
                                <td>{{ elem.eventAt | date : DATE_FORMAT.DATE_TIME_SECONDS }}</td>
                                <td>{{ elem.eventType || DEFAULTS.NOT_AVAILABLE }}</td>
                                <td>{{ elem.category || DEFAULTS.NOT_AVAILABLE }}</td>
                                <td>{{ elem.data.by}}</td>
                                <td>{{ elem.data.closingReason}}</td>
                                <td>{{ elem.data.cliSelectedAction}}</td>
                                <td>{{ elem.data.status}}</td>
                                <td>{{ elem.data.notificationTemplateCode}}</td>
                                <td>{{ elem.data.escalationReason}}</td>
                                <td>{{ elem.data.rejectionReason}}</td>
                                <td>{{ elem.data.document}}</td>
                                <td>{{ elem.data.category}}</td>
                                <td [innerHtml]="elem.data.noteDescription"></td>
                                <td>{{ elem.data.type}}</td>
                                <td>{{ elem.data.question}}</td>
                                <td>{{ elem.data.responseOption}}</td>
                                <td>{{ elem.data.how}}</td>
                                <td>{{ elem.data.recipient}}</td>
                                <td>{{ elem.data.stage}}</td>
                                <td>{{ elem.data.from }}</td>
                                <td>{{ elem.data.to}}</td>
                                <td>{{ elem.data.subject}}</td>
                                <td [innerHtml]="elem.data.body"></td>
                                <td>{{ elem.data.snoozeUntilDate | date : DATE_FORMAT.DATE}}</td>
                            </tr>
                        </tbody>
                    </table>
                </ng-container>
                <ng-container *ngIf="!isTableReady">
                    <h5 *ngIf="isNotConfigured">This functionality isn't configured.</h5>
                </ng-container>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>