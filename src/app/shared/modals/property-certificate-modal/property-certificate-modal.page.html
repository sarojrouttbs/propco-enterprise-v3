<ion-header>
  <ion-toolbar>
    <ion-title *ngIf="category === CERTIFICATES_CATEGORY[0]">Guarantee / Warranty Details</ion-title>
    <ion-title *ngIf="category === CERTIFICATES_CATEGORY[1]">Service Contract/ Appliance Cover Details</ion-title>
    <ion-buttons slot="end">
      <ion-icon name="close" (click)="dismiss()"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ng-container *ngIf="category === CERTIFICATES_CATEGORY[0]">
    <ng-template *ngTemplateOutlet="warrantyDetailsTemplate"></ng-template>
  </ng-container>
  <ng-container *ngIf="category === CERTIFICATES_CATEGORY[1]">
    <ng-template *ngTemplateOutlet="contractDetailsTemplate"></ng-template>
  </ng-container>
</ion-content>
<ng-template #warrantyDetailsTemplate>
  <ion-grid>
    <ion-row>
      <ion-col class="ion-margin-bottom">
        <div>
          Choose an appliance to view more details
        </div>
      </ion-col>
    </ion-row>

    <div class="table-container">
      <table>
        <tr>
          <th>Select</th>
          <th>ID</th>
          <th>Appliance</th>
          <th>Company</th>
          <th>Warranty No.</th>
          <th>Model</th>
          <th>Serial No.</th>
          <th>Start Date</th>
          <th>End Date</th>
        </tr>
      <tbody>
        <tr *ngFor="let certificate of propertyCertificateList; let i=index;" class="table-row">
          <td>
            <ion-checkbox (ionChange)="selectCertificate(certificate, $event.target.checked)" color="primary"
              [checked]="certificate?.isRowChecked" [disabled]="!certificate?.expired"></ion-checkbox>
          </td>
          <td>{{certificate?.certificateId || '-'}}</td>
          <td>{{certificate?.appliance || '-'}}</td>
          <td>{{certificate?.contact || '-'}} </td>
          <td>{{certificate?.certificateNumber || '-'}}</td>
          <td>{{certificate?.model || '-'}} </td>
          <td>{{certificate?.serialNumber || '-'}}</td>
          <td>{{certificate?.startDate | date: 'dd/MM/yyyy' || '-'}}</td>
          <td>{{certificate?.expireDate | date: 'dd/MM/yyyy' || '-'}}</td>
        </tr>
      </tbody>
      </table>
    </div>
  </ion-grid>

  <ion-grid *ngIf="showDetails" class="details-section ">
    <ion-row class="fault-data-row">
      <ion-col size="25">
        <span class="text">Appliance</span>
        <br />
        {{warrantyDetails?.appliance || '-'}}
      </ion-col>
      <ion-col size="25">
        <span class="text">Company</span>
        <br />
        {{warrantyDetails?.contact || '-'}}
      </ion-col>
      <ion-col size="25">
        <span class="text">Warranty Type</span>
        <br />
        {{warrantyDetails?.typeName || '-'}}
      </ion-col>
      <ion-col size="25">
        <span class="text">Warranty Number</span>
        <br />
        {{warrantyDetails?.certificateNumber || '-'}}
      </ion-col>
    </ion-row>

    <ion-row class="fault-data-row">
      <ion-col size="25">
        <span class="text">Serial Number</span>
        <br />
        {{warrantyDetails?.serialNumber || '-'}}
      </ion-col>
      <ion-col size="25">
        <span class="text">Model</span>
        <br />
        {{warrantyDetails?.model || '-'}}
      </ion-col>
      <ion-col size="25">
        <span class="text">Start Date</span>
        <br />
        {{warrantyDetails?.startDate | date: 'dd/MM/yyyy' || '-'}}
      </ion-col>
    </ion-row>

    <ion-row class="fault-data-row">
      <ion-col size="25">
        <span class="text">Phone Number</span>
        <br />
        {{warrantyDetails?.contactNumber || '-'}}
      </ion-col>
      <ion-col size="25">
        <span class="text">Email</span>
        <br />
        {{warrantyDetails?.contact || '-'}}
      </ion-col>
      <ion-col size="25">
        <span class="text">End Date</span>
        <br />
        {{warrantyDetails?.expireDate | date: 'dd/MM/yyyy' || '-'}}
      </ion-col>
    </ion-row>
  </ion-grid>
</ng-template>
<ng-template #contractDetailsTemplate>
  <div class="table-container" style="margin-top: 20px;">
    <table>
      <tr>
        <th>Select</th>
        <th>ID</th>
        <th>Policy Reference</th>
        <th>Company</th>
        <th>Start Date</th>
        <th>End Date</th>
      </tr>
     <tbody>
      <tr *ngFor="let certificate of propertyCertificate; let i=index;" class="table-row">
        <td>
          <ion-checkbox (ionChange)="selectCertificate(certificate, $event.target.checked)" color="primary"
            [checked]="certificate?.isRowChecked" [disabled]="!certificate?.expired"></ion-checkbox>
        </td>
        <td>{{certificate?.certificateId || '-'}}</td>
        <td>{{certificate?.membershipNumber || '-'}} </td>
        <td>{{certificate?.contact || '-'}}</td>
        <td>{{certificate?.startDate | date: 'dd/MM/yyyy' || '-'}}</td>
        <td>{{certificate?.expireDate | date: 'dd/MM/yyyy' || '-'}}</td>
      </tr>
     </tbody>
    </table>
  </div>

  <ion-grid *ngIf="showDetails" class="details-section">
    <ion-row class="fault-data-row">
      <ion-col size="33.33">
        <span class="text">Service Agreement Type</span>
        <br />
        {{contractDetails?.typeName || '-'}}
      </ion-col>
      <ion-col size="33.33">
        <span class="text">Policy Reference</span>
        <br />
        {{contractDetails?.membershipNumber || '-'}}
      </ion-col>
      <ion-col size="33.33">
        <span class="text">Company</span>
        <br />
        {{contractDetails?.contact || '-'}}
      </ion-col>
    </ion-row>

    <ion-row class="fault-data-row">
      <ion-col size="33.33">
        <span class="text">Email</span>
        <br />
        {{contractDetails?.contact || '-'}}
      </ion-col>
      <ion-col size="33.33">
        <span class="text">Start Date</span>
        <br />
        {{contractDetails?.startDate | date: 'dd/MM/yyyy' || '-'}}
      </ion-col>
    </ion-row>

    <ion-row class="fault-data-row">
      <ion-col size="33.33">
        <span class="text">Phone Number</span>
        <br />
        {{contractDetails?.contactNumber || '-'}}
      </ion-col>
      <ion-col size="33.33">
        <span class="text">End Date</span>
        <br />
        {{contractDetails?.expireDate | date: 'dd/MM/yyyy' || '-'}}
      </ion-col>
    </ion-row>
  </ion-grid>
</ng-template>

<ion-footer>
  <ion-grid>
    <ion-row>
      <ion-col class="ion-text-right">
        <ion-button class="cancel-button" (click)="dismiss()" color="success">Close</ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>