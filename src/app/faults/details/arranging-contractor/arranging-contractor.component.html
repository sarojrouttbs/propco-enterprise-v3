  <ion-grid>
    <ion-row *ngIf="faultDetails?.isClosed">
      <ion-col offset-xl="15" size-xl="70" offset="0" size="100">
        <app-close-fault  [notificationData]="iacNotification" [faultDetails]="faultDetails" [action]="getLookupValue(iacNotification?.faultStageAction, iacStageActions) ? getLookupValue(iacNotification?.faultStageAction, iacStageActions) : 'Arranging Contractor'"></app-close-fault>
      </ion-col>
    </ion-row>
   

    <ion-row *ngIf="iacNotification && !showSkeleton && !faultDetails?.isClosed && isContractorSelected">
      <ion-col offset-xl="15" size-xl="70" offset="0" size="100">
        <div class="arranging-contractor">
          <div class="banner">
            <div class="ion-text-left">
              <b>{{iacNotification?.chaseTemplateCode}} {{iacNotification?.firstEmailSentAt | date: 'dd/MM/yyyy HH:mm'
                }}</b>
            </div>
            <h2 class="banner-heading">
              {{iacNotification && iacNotification?.responseReceived ? 'Response Received': 
              (iacNotification?.responseReceived === null && (iacNotification?.allowedNumberOfChases !== 0 && iacNotification?.numberOfChasesDone !== 0) && iacNotification?.allowedNumberOfChases === iacNotification?.numberOfChasesDone && !iacNotification?.hoursLeft?'No response':'Awaiting response')}}
            </h2>
            <h6 class="banner-title">Hereâ€™s the action you chose:</h6>
            <ion-button color="success" class="icon-button">
              {{getLookupValue(iacNotification?.faultStageAction, iacStageActions)}}
              <ion-icon name="checkmark-circle-outline"></ion-icon>
            </ion-button>
            <ng-container *ngIf="iacNotification && iacNotification?.responseReceived">
              <h6 class="banner-title response-recived">
                <ion-icon name="ellipse" class="response-circle"></ion-icon> Response received from 
                <span *ngIf="iacNotification?.recipientType === 8">Landlord</span>
                <span *ngIf="iacNotification?.recipientType === 11">Contractor</span>
                <span *ngIf="iacNotification?.recipientType === 1">Tenant</span>
                {{iacNotification?.chaseTemplateCode}} {{iacNotification?.firstEmailSentAt | date: 'dd/MM/yyyy HH:mm' }}
              </h6>
            </ng-container>

            <ng-container *ngIf="iacNotification && !iacNotification?.responseReceived">
              <h6 class="banner-title"
              [ngClass]="iacNotification?.responseReceived === null && (iacNotification?.allowedNumberOfChases !== 0 && iacNotification?.numberOfChasesDone !== 0) && iacNotification?.allowedNumberOfChases === iacNotification?.numberOfChasesDone && !iacNotification?.hoursLeft?'no-response':'awaiting-response'"
              >
                <ion-icon name="ellipse" class="response-circle"></ion-icon> {{iacNotification?.responseReceived === null && (iacNotification?.allowedNumberOfChases !== 0 && iacNotification?.numberOfChasesDone !== 0) && iacNotification?.allowedNumberOfChases === iacNotification?.numberOfChasesDone && !iacNotification?.hoursLeft?'No response':'Awaiting response'}} from the 
                  <span *ngIf="iacNotification?.recipientType === 8">Landlord</span>
                  <span *ngIf="iacNotification?.recipientType === 11">Contractor</span>
                  <span *ngIf="iacNotification?.recipientType === 1">Tenant</span>
              </h6>

              <h6 *ngIf="iacNotification?.templateCode === 'LNP-L-E' 
              && !faultDetails?.isEscalated">Escalation due: {{iacNotification?.hoursLeft}}</h6>
              <h6 class="banner-title" *ngIf="iacNotification?.nextChaseDueAt 
              && iacNotification.allowedNumberOfChases === iacNotification.numberOfChasesDone 
              && !faultDetails?.isEscalated 
              && iacNotification?.chaseTemplateCode !='LNP-L-E'">Escalation due:
                {{iacNotification ? (iacNotification?.nextChaseDueAt | date: 'dd MMM yyyy - HH:mm') : ''}}
              </h6>
              <h6 class="banner-title" *ngIf="iacNotification?.nextChaseDueAt 
              && iacNotification.allowedNumberOfChases != iacNotification.numberOfChasesDone 
              && iacNotification?.chaseTemplateCode !='LNP-L-E'"> {{ iacNotification.chase === iacNotification.allowedNumberOfChases ? 'Last chase due('+iacNotification.chase+')' : 'Next chase due('+iacNotification.chase+')' }}:
                {{iacNotification ? (iacNotification?.nextChaseDueAt | date: 'dd MMM yyyy - HH:mm') : ''}}
              </h6>

            </ng-container>
          </div>
          <div class="question-answer" *ngFor="let question of iacNotification?.questions">
            <ng-container *ngIf="question?.entityType == fileIds.FIX_A_FAULT">
              <h6>{{question?.qtext}}</h6>
              <ion-grid>
                <ion-row class="ion-justify-content-center">
                  <ng-container *ngFor="let data of question?.options">
                    <ion-button color="success" class="action-btn option"
                    fill="{{data?.value ==  iacNotification?.responseReceived?.isAccepted ? 'solid' :'outline'}}"
                    (click)="questionAction(data)">{{data.text}}</ion-button>
                  </ng-container>
                </ion-row>
              </ion-grid>
              <ion-text color="danger" *ngIf="
              iacNotification?.responseReceived?.isAccepted === false &&
              filteredCCDetails.rejectionReason && 
              (iacNotification?.templateCode === 'QC-L-E' || iacNotification?.templateCode === 'CQ-NA-C-E'  || iacNotification?.templateCode === 'CQ-A-C-E')">Reason:
                {{filteredCCDetails.rejectionReason || 'N/A'}}
                <div *ngIf="filteredCCDetails?.isLandlordWantAnotherQuote">Landlord wants another Quote</div>
              </ion-text>
                <!-- <h6 *ngIf="iacNotification && iacNotification?.responseReceived?.isAccepted === false && this.iacNotification?.templateCode!='CWO-C-E'">
                  <ion-text color="danger">Please select an appropriate action.</ion-text>
                </h6> -->
                <div class="border-bottom"></div>
            </ng-container>
          </div>
          <ng-container *ngIf="iacNotification && (iacNotification?.responseReceived?.isAccepted === true || iacNotification?.responseReceived?.isAccepted === false)">
            <div class="question-answer" *ngIf="(iacNotification?.templateCode === 'CDT-C-E' || iacNotification?.templateCode === 'CDT-T-E') && filteredCCDetails?.contractorPropertyVisitAt">
              <h4 class="ion-text-center">Next Step:</h4> 
              <h6 *ngIf="quoteArray?.length === 0">
                <ion-text color="danger">Please note: </ion-text>
                <span *ngIf="!filteredCCDetails?.contractorPropertyVisitSlot || filteredCCDetails?.contractorPropertyVisitSlot == null">The appointment is due on {{filteredCCDetails?.contractorPropertyVisitAt | date: 'dd/MM/yyyy'}} at {{filteredCCDetails?.contractorPropertyVisitAt | date: 'HH:mm'}}</span>
                <span *ngIf="filteredCCDetails?.contractorPropertyVisitSlot">The appointment is due on {{filteredCCDetails?.contractorPropertyVisitAt | date: 'dd/MM/yyyy'}} {{ filteredCCDetails?.contractorPropertyVisitSlotLabel }}</span>
              </h6>
              <h6 *ngIf="quoteArray?.length > 0">
                <span>Thank you for carrying out this quote. This is now with the Landlord for review. If we require you to
                  carry out the job, we will be back in touch.</span>
              </h6>
              <ion-button color="success" class="action-btn" fill="outline" (click)="filteredCCDetails.isDraft ? overrideQuote('preUpload') : quoteUploadModal('preUpload'); $event.stopPropagation();" *ngIf="quoteArray?.length === 0">Upload Quote & Photos</ion-button>
              <div class="border-bottom"></div>
            </div>

            <div class="question-answer" *ngIf="iacNotification?.templateCode === 'CDT-C-E (WO)' && faultDetails?.contractorWoPropertyVisitAt">
              <h4 class="ion-text-center">Next Step:</h4> 
              <h6>
                <ion-text color="danger">Please note: </ion-text>
                <span *ngIf="!faultDetails?.contractorWoPropertyVisitSlot || faultDetails?.contractorWoPropertyVisitSlot == null">The appointment is due on {{ faultDetails?.contractorWoPropertyVisitAt | date: 'dd/MM/yyyy' }} at {{ faultDetails?.contractorWoPropertyVisitAt | date: 'HH:mm' }}</span>
                <span *ngIf="faultDetails?.contractorWoPropertyVisitSlot">The appointment is due on {{ faultDetails?.contractorWoPropertyVisitAt | date: 'dd/MM/yyyy' }} {{ faultDetails?.contractorWoPropertyVisitSlotLabel }}</span>
              </h6>
              <div class="border-bottom"></div>
            </div>
          </ng-container>
          <ng-container *ngIf="(iacNotification?.responseReceived == null || !iacNotification?.responseReceived?.isAccepted  
          || enableMarkCompletedBtn() && iacNotification?.notificationStatus !== 7)">
            <div class="question-answer" *ngIf="(iacNotification?.responseReceived == null && !faultDetails.isEscalated && faultDetails.status !== 10 && faultDetails.status !== 12)">
              <ng-container *ngIf="iacNotification?.templateCode === 'CDT-C-E' && (iacNotification?.allowedNumberOfChases === iacNotification?.numberOfChasesDone)">
                <h4 class="ion-text-center">Next Step:</h4> 
                <h6 *ngIf="iacNotification?.chaseTemplateCode!='LNP-L-E'">  
                  <ion-text color="danger">Please note: </ion-text>
                  <span>The fault will be <i>escalated</i> automatically if the {{iacNotification?.recipientType == 1?'Tenant':(iacNotification?.recipientType == 11?'Contractor':'Landlord')}} doesn't respond within
                    {{iacNotification?.hoursLeft}}.
                  </span>
                </h6>
                <h6 *ngIf="iacNotification?.chaseTemplateCode=='LNP-L-E'">  
                  <ion-text color="danger">Please note: </ion-text>
                  <span>Fault will be <i>escalated</i> to PM in {{iacNotification?.hoursLeft}}.
                  </span>
                </h6>
                <div class="border-bottom"></div>
              </ng-container>
              <ng-container *ngIf="iacNotification?.templateCode === 'CQ-C-E'">
                <h4 class="ion-text-center">Next Step:</h4> 
                <h6>  
                  <ion-text color="danger">Please note: </ion-text>
                  <span *ngIf="!filteredCCDetails?.contractorPropertyVisitSlot || filteredCCDetails?.contractorPropertyVisitSlot == null">
                    <span *ngIf="currentDate<=filteredCCDetails?.contractorPropertyVisitAt">The appointment for carrying out the Quote is due on {{filteredCCDetails?.contractorPropertyVisitAt | date: 'dd/MM/yyyy'}} at {{filteredCCDetails?.contractorPropertyVisitAt | date: 'HH:mm'}}.</span>
                    <span *ngIf="currentDate>filteredCCDetails?.contractorPropertyVisitAt">The appointment for carrying out the Quote was on {{filteredCCDetails?.contractorPropertyVisitAt | date: 'dd/MM/yyyy'}} at {{filteredCCDetails?.contractorPropertyVisitAt | date: 'HH:mm'}}. </span>
                  </span>

                  <span *ngIf="filteredCCDetails?.contractorPropertyVisitSlot">
                    <span *ngIf="currentDate<=filteredCCDetails?.contractorPropertyVisitAt">The appointment for carrying out the Quote is due on {{filteredCCDetails?.contractorPropertyVisitAt | date: 'dd/MM/yyyy'}} {{ filteredCCDetails?.contractorPropertyVisitSlotLabel }}.</span>
                    <span *ngIf="currentDate>filteredCCDetails?.contractorPropertyVisitAt">The appointment for carrying out the Quote was on {{filteredCCDetails?.contractorPropertyVisitAt | date: 'dd/MM/yyyy'}} {{ filteredCCDetails?.contractorPropertyVisitSlotLabel }}. </span>
                  </span>

                  <span>
                    The next step is for the {{iacNotification?.recipientType == 1?'Tenant':(iacNotification?.recipientType == 11?'Contractor':'Landlord')}} to upload the Quote and photos.<br>Fault will be <i>escalated</i> automatically if the {{iacNotification?.recipientType == 1?'Tenant':(iacNotification?.recipientType == 11?'Contractor':'Landlord')}} doesn't respond within
                    {{iacNotification?.hoursLeft}}.
                  </span>
                </h6>
                <div class="border-bottom"></div>
              </ng-container>
              <ng-container *ngIf="iacNotification?.templateCode === 'CWO-C-E' && currentDate>faultDetails?.contractorWoPropertyVisitAt">                
                <h4 class="ion-text-center">Next Step:</h4>
                <h6>  
                  <ion-text color="danger">Please note: </ion-text>
                  <span *ngIf="!faultDetails?.contractorWoPropertyVisitSlot || faultDetails?.contractorWoPropertyVisitSlot == null">The appointment for carrying out the work was on {{ faultDetails?.contractorWoPropertyVisitAt | date: 'dd/MM/yyyy' }} at {{ faultDetails?.contractorWoPropertyVisitAt | date: 'HH:mm' }}.</span>
                  <span *ngIf="faultDetails?.contractorWoPropertyVisitSlot">The appointment for carrying out the work was on {{ faultDetails?.contractorWoPropertyVisitAt | date: 'dd/MM/yyyy' }} {{ faultDetails?.contractorWoPropertyVisitSlotLabel }}.</span>
                  
                  <span>
                    The next step is for the {{iacNotification?.recipientType == 1?'Tenant':(iacNotification?.recipientType == 11?'Contractor':'Landlord')}} to confirm the Completion of Job.<br>Fault will be <i>escalated</i> automatically if the {{iacNotification?.recipientType == 1?'Tenant':(iacNotification?.recipientType == 11?'Contractor':'Landlord')}} doesn't respond within
                    {{iacNotification?.hoursLeft}}.
                  </span>
                </h6>
                <div class="border-bottom"></div>
              </ng-container>
            </div>

            <div class="question-answer ion-text-center" *ngIf="faultDetails.isEscalated && iacNotification?.notificationStatus !== 7 
            && !filteredCCDetails?.isLandlordWantAnotherQuote">
              <h6>
                <ion-text color="danger">Please note: </ion-text>
                <span *ngIf="faultDetails.isEscalated">Fault Escalated - PM to decide the next steps</span>
              </h6>
              <div class="border-bottom"></div>
            </div>
            
            <h6 *ngIf="enableMarkCompletedBtn()" class="ion-text-center">
              <ion-text *ngIf="!faultDetails?.contractorWoPropertyVisitSlot || faultDetails?.contractorWoPropertyVisitSlot == null">Contractor to visit property on {{ faultDetails?.contractorWoPropertyVisitAt | date: 'dd/MM/yyyy HH:mm' }}</ion-text>
              <ion-text *ngIf="faultDetails?.contractorWoPropertyVisitSlot">Contractor to visit property on {{ faultDetails?.contractorWoPropertyVisitAt | date: 'dd/MM/yyyy' }} {{ faultDetails?.contractorWoPropertyVisitSlotLabel }} </ion-text>
              <ion-grid>
                <ion-row class="ion-justify-content-center"><ion-button color="success" fill="outline" class="action-btn option" (click)="openWOJobCompletionModal()">Mark the Job Completed</ion-button></ion-row>
              </ion-grid>
            </h6>
          </ng-container>

          <div class="question-answer"
            *ngIf="iacNotification?.recipientType === 8 
            && faultDetails?.isOverrideCommunicationPreference === true
            && iacNotification?.notificationStatus === 7
            && iacNotification?.responseReceived === null">
            <h4 claas="ion-text-center">Next Step:</h4>
            <h6>
              <ion-text color="danger">Please note: </ion-text>
              <span>This Fault is escalated as Landlord Override communication option is activated. 
                Please respond yourself or forward to Landlord for them to take an action by clicking here</span>
            </h6>
            <ion-button color="success" class="action-btn" fill="solid" (click)="viewNotification(); $event.stopPropagation();">
              View Notification</ion-button>
            <div class="border-bottom"></div>
          </div>

          <div class="question-answer"
            *ngIf="iacNotification && filteredCCDetails?.isLandlordWantAnotherQuote">
            <h4 class="ion-text-center">Next Step:</h4>
            <h6>Based on Landlord's response, the next action is:</h6>
            <ion-grid>
              <ion-row class="ion-justify-content-center">
                <ion-button color="success" expand="block" class="action-btn"
                (click)="scrollToAddCC()" 
                fill="outline">
                Obtain Quote
              </ion-button>
              </ion-row>
            </ion-grid>            
            <div class="border-bottom"></div>
          </div>

          <div class="question-answer">
            <h6 class="banner-title">Want to proceed in a different way? Choose one of the following instead:</h6>
            <ion-grid>
              <ion-row class="ion-justify-content-center">
                <ng-container *ngIf="iacNotification">
                  <ng-container *ngFor="let instruction of otherStageActions">
                    <div>
                      <ion-button color="success" expand="block" class="action-btn"
                        [disabled]="instruction.index === 'OBTAIN_QUOTE' && !isWorksOrder"
                        fill="{{userSelectedActionControl.value == instruction.index ? 'solid' :'outline'}}"
                        (click)="setUserAction(instruction.index)" [hidden]="filteredCCDetails?.isLandlordWantAnotherQuote && instruction.index=='OBTAIN_QUOTE'">
                        {{instruction.value}}
                        <ion-icon name="checkmark-circle-outline" class="check-icon"
                          *ngIf="(userSelectedActionControl.value == instruction.index)"></ion-icon>
                      </ion-button>
                    <h6 class="ownRepair" *ngIf="(instruction.index == 'DOES_OWN_REPAIRS' && isMatch === false )">
                      Landlord owned Repair Category does not match the Fault Category</h6>
                    </div>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="iacNotification && 
                  (
                    (
                      ( iacNotification?.templateCode === 'CDT-C-E' || iacNotification?.templateCode === 'CDT-C-E (WO)' ) && 
                      ( iacNotification?.responseReceived?.isAccepted === true || iacNotification?.responseReceived?.isAccepted === false ) 
                    ) || 
                    (
                      ( iacNotification?.templateCode === 'CQ-C-E' || iacNotification?.templateCode === 'CWO-C-E' ) && 
                      ( iacNotification?.responseReceived === null || faultDetails?.isEscalated  || iacNotification?.responseReceived?.isAccepted === false )
                    )
                  )">
                  <ion-button color="success" expand="block" class="action-btn" fill="outline"
                      (click)="modifyDateTime(iacNotification?.templateCode); $event.stopPropagation();">
                      <ng-container *ngIf="iacNotification?.templateCode === 'CDT-C-E' || iacNotification?.templateCode === 'CQ-C-E'" >
                        {{filteredCCDetails?.contractorPropertyVisitAt ? 'Modify': 'Add'}} Date/Time
                      </ng-container>
                      <ng-container *ngIf="iacNotification?.templateCode === 'CDT-C-E (WO)' || iacNotification?.templateCode === 'CWO-C-E'" >
                        {{faultDetails?.contractorWoPropertyVisitAt ? 'Modify': 'Add'}} Date/Time
                      </ng-container>
                  </ion-button>
                </ng-container>
                <ion-button color="success" *ngIf="iacNotification && iacNotification?.templateCode === 'CWO-C-E'"  
                expand="block" class="action-btn" fill="{{faultDetails?.isClosed ? 'solid' : 'outline'}}" (click)="closeFault()">
                  Close Fault</ion-button>
                  <ion-button *ngIf="faultDetails?.isEscalated"  color="success" expand="block" class="action-btn" fill="outline" (click)="snoozeFault()">
                  Snooze Fault</ion-button>
              </ion-row>
            </ion-grid>
          </div>
          <app-useractionforms [codes]="codes"  [isAuthorizationfields] = "isAuthorizationfields" [hideWOform]="hideWOform" [userActionForms]="userActionForms" [actionSelected]="userSelectedActionControl.value" [faultDetails]="faultDetails"></app-useractionforms>
          <!-- <ion-button (click)="questionActionQuoteUpload(true)">Upload</ion-button> -->
        </div>
      </ion-col>
    </ion-row>
    <ion-grid *ngIf="(iacNotification?.templateCode === 'CQ-C-E' || iacNotification?.templateCode === 'QC-L-E') && ccQuoteDocuments?.length && !showSkeleton && isContractorSelected">
      <ion-row>
        <ion-col offset-xl="15" size-xl="70" offset="0" size="100">
          <h2>Quote Documents</h2>
          <div class="border-bottom"></div>
          <ion-row>
            <ion-col size-xl="25" size="25" *ngFor="let file of ccQuoteDocuments; let i=index;">
              <div class="delete-icon-wrapper">
                <ion-grid>
                  <ion-row>
                    <!-- <ion-col size="100" *ngIf="getFileType(file.name)">
                      <img src="/assets/images/default.jpg" (click)="downloadDocumentByURl(file.documentUrl)"
                        title="Click To Download PDF">
                    </ion-col>
                    <ion-col size="100" *ngIf="!getFileType(file.name)">
                      <img [src]="file.documentUrl ? file.documentUrl : '/assets/images/default.jpg'"
                        (click)="downloadDocumentByURl(file.documentUrl)" title="Click To Download">
                    </ion-col> -->
                    <ion-col size="100">
                      <img [src]="file?.isImage ? (file?.documentUrl ? file?.documentUrl : 'assets/images/default.jpg') : 'assets/images/default.jpg'" (click)="downloadDocumentByURl(file?.documentUrl, file?.name)" title="Click To Download">
                    </ion-col>    
                  </ion-row>
                  <ion-row class="ion-justify-content-between">
                    <ion-col size-xl="80" size-lg="70" size="80">
                      <div class="file-name">{{file.name}}</div>
                    </ion-col>
                    <ion-col size-xl="10" size-lg="15" size="10" class="ion-text-end ion-no-padding">
                      <ion-icon (click)="deleteDocument(file?.documentId, i)" title="Delete File" class="delete-icon"
                        name="close-circle">
                      </ion-icon>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </div>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-row *ngIf="isFormsReady && !showSkeleton">

        <ion-col offset-xl="15" size-xl="70" offset="0" size="100">
          <ng-container *ngIf="!isWorksOrder">
            <div class="quote-request-banner" *ngIf="!isContractorSelected && faultNotifications.length">
              <ion-text>You have requested multiple quotes.</ion-text>
              <ion-text>Please select a contractor from the list below to see the status.</ion-text>
            </div>
            <form [formGroup]="raiseQuoteForm">
              <ion-grid>
                <div class="contractor-block">
                  <div formArrayName="contractorList"
                    *ngFor="let item of raiseQuoteForm.get('contractorList')['controls']; let i = index;">
                    <ion-row id="row_1" class="row-banner cc-list" [formGroupName]="i"
                      [ngClass]="{
                        'rejected': item.get('isRejected').value ,
                        'quote-accepted': item.get('quoteContractorStatus').value == 2,
                        'quote-sent': item.get('quoteContractorStatus').value == 5, 
                        'quote-not-approved': item.get('quoteContractorStatus').value == 9,
                        'selected': item.get('contractorId').value == filteredCCDetails?.contractorId
                      }">
                      <ion-col size="30">
                        <ion-text  style="padding-bottom: 3px;" class="sq-label">Company Name </ion-text>
                        <span *ngIf="item.get('isPreferred').value" class="prefered-cc" matTooltip="Preferred Contractor"><ion-icon name="checkmark-circle-outline"> </ion-icon></span>
                        <ion-text>{{item.get('company').value ? item.get('company').value : 'N/A'}}</ion-text>
                      </ion-col>
                      <ion-col size="20" size-xl="17">
                        <ion-text  class="sq-label">Mobile</ion-text>
                        <ion-text >{{item.get('mobile').value ? item.get('mobile').value : 'N/A'}}</ion-text>
                      </ion-col>
            
                      <ion-col size="20" class="skills">
                        <ion-text class="sq-label">Skills</ion-text>
                        <ion-text>
                          <span *ngIf="item.get('reference').value?.length > 15" (click)="showSkillsDetailsPopup(item.get('reference').value)" class="pointer">
                            {{ item.get('reference').value?.substring(0,15)+"..." }}
                          </span>
                          <span *ngIf="item.get('reference').value?.length <= 15">
                            {{ item.get('reference').value || 'N/A' }}
                          </span>
                        </ion-text>
                      </ion-col>
                      <ion-col size="20">
                        <ion-text  class="sq-label">Quote Status</ion-text>
                        <ion-text><strong>{{ item.get('status').value ? item.get('status').value : 'N/A'}}</strong></ion-text>
                      </ion-col>
                      <ion-col size="10" size-xl="13">
                        <div class="action-btn-container">
                          <ion-checkbox color="success" class="list-checkbox" formControlName="isActive" mode="ios"
                          (ionChange)="updateContractorState($event,item.value)" [disabled]="(!item.get('isNew').value && !item.get('isPreferred').value) || item.get('quoteContractorStatus').value || 
                          (item.get('isRejected').value) && item.get('rejectedByType').value === REJECTED_BY_TYPE.LANDLORD" *ngIf="!item.get('isNonSq').value">
                           </ion-checkbox>
                          <ion-fab class="cc-list-button" horizontal="end" *ngIf="!item.get('isNonSq').value" >
                            <ion-fab-button class="expand-btn">      
                               <i class="propcoicon propcoicon-actions-on"></i>
                            </ion-fab-button>
                            <ion-fab-list side="start">
                              <ion-button *ngIf="item.get('quoteContractorStatus').value" (click)="selectedCCDetails(item.get('contractorId').value)">View </ion-button>
                              <ion-button  (click)="removeContractor(i,item.get('isRejected').value)" *ngIf="!item.get('quoteContractorStatus').value">Remove</ion-button>
                               <!-- <ion-fab-button class="check-button" *ngIf="item.get('isPreferred').value">
                                <span matTooltip="Preferred Contractor" matTooltipPosition="above">
                                  <ion-icon class="list-button" name="checkmark-circle-outline"> </ion-icon>
                                </span>
                              </ion-fab-button> -->
                               <!-- <ion-fab-button class="check-button" *ngIf="item.get('isPreferred').value">
                                 <span matTooltip="Preferred Contractor" matTooltipPosition="above">
                                   <ion-icon class="list-button" name="checkmark-circle-outline"> </ion-icon>
                                 </span>
                               </ion-fab-button>
                               <ion-fab-button class="close-button">
                                 <span  (click)="removeContractor(i,item.get('isRejected').value)" matTooltip="Delete" matTooltipPosition="above">
                                   <ion-icon class="list-button" name="close-circle-outline"></ion-icon>
                                 </span>
                               </ion-fab-button> -->
                            </ion-fab-list>
                          </ion-fab>
                          <!-- <ion-icon class="list-button" *ngIf="item.get('isPreferred').value"
                            matTooltip="Preferred Contractor" matTooltipPosition="above" name="checkmark-circle-outline">
                          </ion-icon>
                          <ion-icon class="list-button" color="danger"
                            (click)="removeContractor(i,item.get('isRejected').value)" name="close-circle-outline"></ion-icon> -->
                        </div>
                      </ion-col>
                    </ion-row>
                  </div>
      
                  <ion-row id="addCCform" class="row-banner" [formGroup]="addContractorForm" *ngIf="!addMoreCCrestrictAction">
                    <ion-col size="45">
                      <ion-item>
                        <ion-label position="floating">Skill Set</ion-label>
                        <ion-select interface="popover" formControlName="skillSet" class="ion-select-options">
                          <ion-select-option value="">Please Select</ion-select-option>
                          <ion-select-option [value]="item.value" *ngFor="let item of contractorSkill">
                            {{ item.value }}
                          </ion-select-option>
                        </ion-select>
      
                      </ion-item>
                    </ion-col>
                    <ion-col size="45">
                      <ion-item>
                        <ion-label position="floating">Start Typing to Search Contractors</ion-label>
                        <ion-input type="text" debounce="300" (ionInput)="onSearch($event)" formControlName='contractor'
                          placeholder="" (ionFocus)="onSearch($event)"> 
                          <!-- (ionBlur)="onBlurContractorSearch($event)"> -->
                        </ion-input>
                      </ion-item>
      
                      <ion-list class="contractor-list" *ngIf="resultsAvailable">
                        <ion-item *ngFor="let result of (contractors| async)?.data" (click)="selectContractor(result)" button
                          style="font-size: 13px !important;">
                          <span>
                            <i class="propcoicon no-background propcoicon-contractor" style="background: transparent;"></i>
                          </span>&nbsp;
                          <label style="color: var(--ion-color-step-200); padding-right: 5px;">{{result.fullName}}&nbsp;
                            <span
                              style="color: var(--ion-color-step-1000);padding-right: 5px;">{{result.reference}}</span>&nbsp;
                            <span class="text-color-lightgreen"
                              style="color: var(--ion-color-primary);padding-right: 5px;">{{result.status}}</span>&nbsp;
                          </label>
      
                        </ion-item>
                      </ion-list>
                      <ion-text *ngIf="isContratorSelected" class="error-message">This contractor is already selected
                      </ion-text>
                      <div *ngIf="addContractorForm.get('contractor').hasError('invalidContractor') && addContractorForm.get('contractor').touched" class="contractor-error-message">{{addContractorForm.get('contractor').errors.message}}</div>
 
                    </ion-col>
      
                    <ion-col size="10">
                      <ion-fab-button class="button-container" (click)="addContractor(addContractorForm?.value)"
                        [disabled]="!addContractorForm?.get('contractor').value || !isSelected || addContractorForm.controls['contractor'].invalid">
                        <ion-icon name="add-sharp" class="add-contractor list-button"></ion-icon>
                      </ion-fab-button>
                    </ion-col>
                  </ion-row>
                  <ion-col size="100" *ngIf="!addMoreCCrestrictAction">
                    <ion-text color="dark"> Note: Please click Add to add another contractor to the list.</ion-text>
                  </ion-col>
                </div>
               <ng-container *ngTemplateOutlet="quoteDetails"></ng-container>
             </ion-grid>
             </form>
          </ng-container>
          <ng-container *ngIf="isWorksOrder && !hideWOform ">
            <form [formGroup]="workOrderForm">
              <ion-grid>
               <ng-template *ngTemplateOutlet="worksOrderDetails"></ng-template>
             </ion-grid>
             </form>
          </ng-container>
        </ion-col>
      
    </ion-row>
    <ion-row *ngIf="showSkeleton">
      <ion-col offset-xl="15" size-xl="70" offset="0" size="100">
      <div><ng-container *ngTemplateOutlet="notificationSkeleton"></ng-container></div>
      <div *ngIf="isWorksOrder" ><ng-container *ngTemplateOutlet="worksOrderFormSkeleton"></ng-container></div>
      <div *ngIf="!isWorksOrder"><ng-container *ngTemplateOutlet="raiseQuoteFormSkeleton"></ng-container></div>
    </ion-col>
    </ion-row>
  </ion-grid>
<ng-template #quoteDetails>
  <form [formGroup]="raiseQuoteForm">
    <ion-row>
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Quotation Number<ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-input formControlName="worksOrderNumber"></ion-input>
        </ion-item>
        <app-validation-message [control]="raiseQuoteForm.controls.worksOrderNumber"></app-validation-message>
      </ion-col>
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Category <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-select interface="popover" formControlName="quoteCategory">
            <ion-select-option [value]="item.value" *ngFor="let item of faultCategories">{{ item.value }}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col size="50">  
        <ion-item class="select-block">
          <ion-label position="floating">Nominal Code <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ionic-selectable item-content itemValueField="nominalCode" itemTextField="concat" [items]="codes"
            [canSearch]="true" [canClear]="true" clearButtonText="Clear" closeButtonSlot="end" confirmButtonText="Apply"
            searchPlaceholder="Search Nominal Code" #nominalCodeType formControlName="nominalCode"
            [shouldStoreItemValue]="false" class="selectable-height" (click)="startLoading()" (onOpen)="endLoading()"
            [shouldBackdropClose]="false">
  
            <ng-template ionicSelectableHeaderTemplate>
              <ion-toolbar>
                <ion-buttons end>
                </ion-buttons>
                <ion-title>
                  {{nominalCodeType.label}}
                </ion-title>
              </ion-toolbar>
            </ng-template>
  
            <ng-template ionicSelectableFooterTemplate>
              <ion-toolbar>
                <ion-button color="success" class="action-btn" fill="outline" class="selectable-btn"
                  (click)="nominalCodeType.confirm();nominalCodeType.close();"
                  [disabled]="!nominalCodeType.itemsToConfirm.length">
                  Apply
                </ion-button>
  
                <ion-button color="danger" class="action-btn" fill="outline" class="selectable-btn"
                  (click)="nominalCodeType.clear();nominalCodeType.close();"
                  [disabled]="!nominalCodeType.itemsToConfirm.length">
                  Clear
                </ion-button>
                <ion-button color="danger" class="action-btn" fill="outline" class="selectable-btn"
                  (click)="nominalCodeType.close()">
                  Cancel
                </ion-button>
              </ion-toolbar>
            </ng-template>
          </ionic-selectable>
        </ion-item>
        <app-validation-message [control]="raiseQuoteForm.controls.nominalCode"></app-validation-message>
      </ion-col>
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Quote Status</ion-label>
          <ion-select interface="popover" formControlName="quoteStatus">
            <ion-select-option [value]="item.index" *ngFor="let item of quoteStatuses">{{ item.value }}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
  
      <ion-col size="100">
        <ion-item>
          <ion-label position="floating">Description<ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-input formControlName="description"></ion-input>
        </ion-item>
        <app-validation-message [control]="raiseQuoteForm.controls.description"></app-validation-message>
      </ion-col>
  
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Ordered By<ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-input formControlName="orderedBy"></ion-input>
        </ion-item>
      </ion-col>
  
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Required By<ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-datetime formControlName="requiredDate" displayFormat="DD/MM/YYYY" interface="popover"
            class="request-start-date">
          </ion-datetime>
        </ion-item>
        <app-validation-message [control]="raiseQuoteForm.controls.requiredDate"></app-validation-message>
      </ion-col>
  
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Contact On-site </ion-label>
          <ion-input formControlName="contact"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Does the branch hold Management Keys?</ion-label>
          <ion-input formControlName="doesBranchHoldKeys"></ion-input>
        </ion-item>
      </ion-col>
  
      <!-- <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Access Information </ion-label>
          <ion-input formControlName="accessDetails"></ion-input>
        </ion-item>
      </ion-col> -->
      <ion-col size="100">
        <ion-item>
          <ion-label position="floating">Full Job Description <ion-text class="mandatory">*</ion-text></ion-label>
          <ion-textarea rows="1" formControlName="fullDescription" auto-grow="true"></ion-textarea>
        </ion-item>
      </ion-col>

      <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Job Type</ion-label>
          <ion-select interface="popover" formControlName="jobType">
            <ion-select-option [value]="item.index" *ngFor="let item of maintenanceJobTypes">{{ item.value }}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Repair Source</ion-label>
          <ion-select interface="popover" formControlName="repairSource">
            <ion-select-option [value]="item.index" *ngFor="let item of maintenanceRepairSources">{{ item.value }}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col size="33.33" *ngIf="raiseQuoteForm.controls.repairSource.value === maintenanceRepairSourcesMap.get('third party')">
        <ion-item>
          <ion-label position="floating">Third Party</ion-label>
            <ion-select interface="popover" formControlName="thirdPartySource">
              <ion-select-option [value]="item.index" *ngFor="let item of faultReportedByThirdParty">{{item.value}}
              </ion-select-option>
            </ion-select>
        </ion-item>
      </ion-col>
    </ion-row>
  </form>
</ng-template>
<ng-template #worksOrderDetails>
  <form [formGroup]="workOrderForm">
    <ion-row class="row-banner">
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Contractor <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-input type="text" debounce="300" (ionInput)="onSearchContractor($event)" formControlName='contractorName'
            placeholder="">
          </ion-input>
        </ion-item>
        <app-validation-message [control]="workOrderForm.controls.contractorName"></app-validation-message>
        <ion-list class="contractor-list" *ngIf="woResultsAvailable">
          <ion-item *ngFor="let result of (woContractors| async)?.data" (click)="woSelectContractor(result)" button
            style="font-size: 13px !important;">
            <span>
              <i class="propcoicon no-background propcoicon-contractor" style="background: transparent;"></i>
            </span>&nbsp;
            <label style="color: var(--ion-color-step-200); padding-right: 5px;">{{result.fullName}}&nbsp;
              <span style="color: var(--ion-color-step-1000);padding-right: 5px;">{{result.reference}}</span>&nbsp;
              <span class="text-color-lightgreen"
                style="color: var(--ion-color-primary);padding-right: 5px;">{{result.status}}</span>&nbsp;
            </label>
          </ion-item>
        </ion-list>
        <div *ngIf="workOrderForm.get('contractorName').hasError('invalidContractor') && workOrderForm.get('contractorName').touched" class="contractor-error-message">{{workOrderForm.get('contractorName').errors.message}}</div>

      </ion-col>
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Company </ion-label>
          <ion-input formControlName="company"></ion-input>
        </ion-item>
      </ion-col>

      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Address </ion-label>
          <ion-input formControlName="address"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="25">
        <ion-item>
          <ion-label position="floating">Daytime </ion-label>
          <ion-input formControlName="daytime"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="25">
        <ion-item>
          <ion-label position="floating">Mobile </ion-label>
          <ion-input formControlName="mobile"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="row-banner">
        <ion-col size="50">
          <ion-item>
            <ion-label position="floating">Reference </ion-label>
            <ion-input formControlName="agentReference"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="50">
          <ion-radio-group formControlName="useCommissionRate" class="defaultCommission">
            <ion-item class="ion-item">
              <ion-radio [value]="true" checked style="margin-right: 5px;" [disabled]="iacNotification"></ion-radio>
              <ion-label position="fixed" class="ion-label" >Rate(%) </ion-label>
                <ion-input formControlName="defaultCommissionPercentage" class="ion-input" 
                [readonly]="!workOrderForm?.value.useCommissionRate "
                [disabled]="iacNotification || !workOrderForm?.value.useCommissionRate"
                ></ion-input>
            </ion-item>
            <ion-item class="ion-item defaultCommission" >
              <ion-radio [value]="false" checked style="margin-right: 5px;" [disabled]="iacNotification"></ion-radio>
              <ion-label position="fixed" class="ion-label">Amount(Â£) </ion-label>
                <ion-input formControlName="defaultCommissionAmount" class="ion-input" 
                [readonly]="workOrderForm?.value.useCommissionRate "
                [disabled]="iacNotification || workOrderForm?.value.useCommissionRate"
                ></ion-input>
            </ion-item>
          </ion-radio-group>
        </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="50">
        <ion-item>
          <ion-label position="stacked">Repair Cost <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <!-- <ion-input currencyMask formControlName="repairCost"></ion-input> -->
          <input currencyMask formControlName="repairCost" (blur)="onBlurCurrency(workOrderForm.controls.repairCost.value, workOrderForm)"/>

        </ion-item>
        <app-validation-message [control]="workOrderForm.controls.repairCost"></app-validation-message>
      </ion-col>
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Work Order Number </ion-label>
          <ion-input formControlName="worksOrderNumber"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Date </ion-label>
          <ion-datetime dateFormat="MM/DD/YYYY" displayFormat="DD MMM YYYY" class="datetime-padding"
            formControlName="postdate">
          </ion-datetime>
        </ion-item>
      </ion-col>
      <ion-col size="50">
        <!-- <ion-item>
          <ion-label position="floating">Nominal code <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-input formControlName="nominalCode"></ion-input>
        </ion-item> -->

        <ion-item class="select-block">
          <ion-label position="floating">Nominal Code <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ionic-selectable item-content itemValueField="nominalCode" itemTextField="concat" [items]="codes"
            [canSearch]="true" [canClear]="true" clearButtonText="Clear" closeButtonSlot="end" confirmButtonText="Apply"
            searchPlaceholder="Search Nominal Code" #nominalCodeType formControlName="nominalCode"
            [shouldStoreItemValue]="false" class="selectable-height" (click)="startLoading()" (onOpen)="endLoading()"
            [shouldBackdropClose]="false">

            <ng-template ionicSelectableHeaderTemplate>
              <ion-toolbar>
                <ion-buttons end>
                </ion-buttons>
                <ion-title>
                  {{nominalCodeType.label}}
                </ion-title>
              </ion-toolbar>
            </ng-template>

            <ng-template ionicSelectableFooterTemplate>
              <ion-toolbar>
                <ion-button color="success" class="action-btn" fill="outline" class="selectable-btn"
                  (click)="nominalCodeType.confirm();nominalCodeType.close();"
                  [disabled]="!nominalCodeType.itemsToConfirm.length">
                  Apply
                </ion-button>

                <ion-button color="danger" class="action-btn" fill="outline" class="selectable-btn"
                  (click)="nominalCodeType.clear();nominalCodeType.close();"
                  [disabled]="!nominalCodeType.itemsToConfirm.length">
                  Clear
                </ion-button>
                <ion-button color="danger" class="action-btn" fill="outline" class="selectable-btn"
                  (click)="nominalCodeType.close()">
                  Cancel
                </ion-button>
              </ion-toolbar>
            </ng-template>
          </ionic-selectable>
        </ion-item>
        <app-validation-message [control]="workOrderForm.controls.nominalCode"></app-validation-message>
      </ion-col>
      <ion-col size="100">
        <ion-item>
          <ion-label position="floating">Description <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-input formControlName="description"></ion-input>
        </ion-item>
        <app-validation-message [control]="workOrderForm.controls.description"></app-validation-message>
      </ion-col>
      <!-- <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Paid Via <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-input formControlName="paidBy"></ion-input>
        </ion-item>
        <app-validation-message [control]="workOrderForm.controls.paidBy"></app-validation-message>
      </ion-col> -->
      <!-- <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Paid To </ion-label>
          <ion-input formControlName="paidTo"></ion-input>
        </ion-item>
      </ion-col> -->
      <!-- <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Default Commission </ion-label>
          <ion-input formControlName="defaultCommision"></ion-input>
        </ion-item>
      </ion-col> -->
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Keys Location
          </ion-label>
          <ion-input formControlName="keysLocation"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="50">
        <ion-item>
          <ion-label position="floating">Return Keys to </ion-label>
          <ion-input formControlName="returnKeysTo"></ion-input>
        </ion-item>
      </ion-col>
      <!-- <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Access Details <ion-text class="mandatory">*</ion-text>
          </ion-label>
          <ion-input formControlName="accessDetails"></ion-input>
        </ion-item>
        <app-validation-message [control]="workOrderForm.controls.accessDetails"></app-validation-message>
      </ion-col> -->
      <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Required Start Date</ion-label>
          <ion-datetime dateFormat="MM/DD/YYYY" displayFormat="DD MMM YYYY" class="datetime-padding"
            formControlName="requestStartDate" [min]="currentDate">
          </ion-datetime>
        </ion-item>
      </ion-col>
      <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Required Completion Date </ion-label>
          <ion-datetime dateFormat="MM/DD/YYYY" displayFormat="DD MMM YYYY" class="datetime-padding"
            formControlName="requiredDate" [min]="currentDate">
          </ion-datetime>
        </ion-item>
      </ion-col>
      <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Ordered By </ion-label>
          <ion-input formControlName="orderedBy"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="100">
        <ion-item>
          <ion-label position="floating">Full Job Description <ion-text class="mandatory">*</ion-text></ion-label>
          <ion-textarea rows="1" formControlName="fullDescription" auto-grow="true"></ion-textarea>
        </ion-item>
        <app-validation-message [control]="workOrderForm.controls.fullDescription"></app-validation-message>
      </ion-col>

      <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Job Type</ion-label>
          <ion-select interface="popover" formControlName="jobType">
            <ion-select-option [value]="item.index" *ngFor="let item of maintenanceJobTypes">{{ item.value }}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col size="33.33">
        <ion-item>
          <ion-label position="floating">Repair Source</ion-label>
          <ion-select interface="popover" formControlName="repairSource">
            <ion-select-option [value]="item.index" *ngFor="let item of maintenanceRepairSources">{{ item.value }}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col size="33.33" *ngIf="workOrderForm.controls.repairSource.value === maintenanceRepairSourcesMap.get('third party')">
        <ion-item>
          <ion-label position="floating">Third Party</ion-label>
            <ion-select interface="popover" formControlName="thirdPartySource">
              <ion-select-option [value]="item.index" *ngFor="let item of faultReportedByThirdParty">{{item.value}}
              </ion-select-option>
            </ion-select>
        </ion-item>
      </ion-col>
    </ion-row>
  </form>
</ng-template>
<div class="action-btn-group">
  <ion-button (click)="_btnHandler('cancel')" class="cancel-button" [disabled]="saving || proceeding">Cancel</ion-button>
  <ion-button (click)="_btnHandler('back')" [disabled]="saving || proceeding">Back</ion-button>
  <ion-button (click)="_btnHandler('next')" *ngIf="faultDetails?.stage !== FAULT_STAGES.ARRANGING_CONTRACTOR" [disabled]="saving || proceeding">Next</ion-button>
  <ion-button class="save-button" (click)="_btnHandler('save')" [disabled]="proceeding || faultDetails?.isClosed || (!isWorksOrder && faultNotifications.length) || (iacNotification && iacNotification.responseReceived && !iacNotification.responseReceived.isAccepted && iacNotification.templateCode === 'CWO-C-E')">Save for later<ion-icon *ngIf="saving" name="refresh" class="rotating submit-loader"></ion-icon></ion-button>
  <ion-button class="submit-button" (click)="_btnHandler('proceed')" [disabled]="saving || faultDetails?.isClosed || (faultNotifications.length && addMoreCCrestrictAction && !isUserActionChange)">Proceed<ion-icon *ngIf="proceeding" name="refresh" class="rotating submit-loader"></ion-icon></ion-button>
</div>

<ng-template #raiseQuoteFormSkeleton>
  <div class="custom-skeleton">
    <div class="skeleton-content">
      <div class="forms-container" >
        <ion-grid>
          <div class="forms-block">
            <ion-row>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="100">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="100">
                <p class="icons"  style="height: 70px;border-radius: 10px;">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
            </ion-row>
          </div>
        </ion-grid>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #worksOrderFormSkeleton>
  <div class="custom-skeleton">
    <div class="skeleton-content">
      <div class="forms-container" >
        <ion-grid>
          <div class="forms-block">
            <ion-row>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="33.3">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="33.3">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="33.3">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="100">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="50">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="33.3">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="33.3">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="33.3">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
              <ion-col size="100">
                <p class="icons">
                  <ion-skeleton-text class="header" animated style="width: 100%"></ion-skeleton-text>
                </p>
              </ion-col>
            </ion-row>
          </div>
        </ion-grid>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #notificationSkeleton>
  <div class="arranging-contractor">
    <div class="banner">
      <div class="ion-text-left">
        <ion-skeleton-text class="header" animated style="width: 17%;height: 16px;"></ion-skeleton-text>
      </div>
      <h2 class="banner-heading">
        <ion-skeleton-text class="header" animated style="width: 25%;margin: auto;height: 20px;"></ion-skeleton-text></h2>
      <h6 class="banner-title"><ion-skeleton-text class="header" animated style="width: 20%;margin: auto;"></ion-skeleton-text></h6>
      <ion-skeleton-text class="header" animated style="width: 29%;margin: auto;height: 31px;border-radius: 5px;"></ion-skeleton-text>
      <ng-container>
        <h6 class="banner-title response-recived">
          <ion-skeleton-text class="header" animated style="width: 31%;height: 12px;margin: auto;"></ion-skeleton-text>
        </h6>
      </ng-container>

    </div>
    <div class="question-answer">
      <h6>  <ion-skeleton-text class="header" animated style="width: 48%;margin: auto;"></ion-skeleton-text></h6>
      <ion-grid>
        <ion-row class="ion-justify-content-center">
          <ng-container>
            <ion-skeleton-text class="header" animated style="width: 45%;margin: auto;"></ion-skeleton-text>
            <ion-skeleton-text class="header" animated style="width: 45%;margin: auto;"></ion-skeleton-text>
          </ng-container>
        </ion-row>
      </ion-grid>
    </div>
  </div>
</ng-template>