<ng-template #caseDetails>
  <form>
    <ion-grid>
      <ion-row class="ion-justify-content-start">
        <ion-col size="auto">
          <h2>Bath & Toilet <ion-text color="success">›</ion-text><ion-text></ion-text></h2>
        </ion-col>
        <ion-col size="auto">
          <ion-item lines="none" class="edit-title">
            <ion-input value="Fault jksahdfkh kjhfdskh jkha fdsjh jasdfh hahasfjkhjhjkfh jkhsfh" style="font-size:24px;padding-bottom:0"></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="auto" class="ion-no-padding">
          <ion-button>Edit</ion-button>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="100">
          <ion-item>
            <ion-label position="floating">Urgency Status</ion-label>
            <ion-select interface="popover">
              <ion-select-option [value]="item.index" *ngFor="let item of catList"
                >{{ item.value }}
              </ion-select-option>
            </ion-select>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="100">
          <ion-item>
            <ion-label position="floating">Fault description</ion-label>
            <ion-input></ion-input>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ng-template>

<ng-template #additionalInfo>
  <form>
    <ion-grid>
      <ion-row>
        <ion-col size="50">
          <ion-grid class="additional-info-container">
            <ion-row>
              <ion-col size="30">
                <ion-item>
                  <ion-label position="floating">Type</ion-label>
                  <ion-select interface="popover">
                    <ion-select-option [value]="item.index" *ngFor="let item of catList"
                      >{{ item.value }}
                    </ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-col>
              <ion-col size="60">
                <ion-item>
                  <ion-label position="floating">Additional Info</ion-label>
                  <ion-input></ion-input>
                </ion-item>
              </ion-col>
              <ion-col size="10">
                <ion-button class="margin-top-16">Add</ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>

  <form>
    <ion-grid>
      <ion-row>
        <ion-col size="50">
          <ion-grid>
            <ion-row>
              <ion-col size="30">
                <ion-item>
                  <ion-label position="floating">Type</ion-label>
                  <ion-select interface="popover">
                    <ion-select-option [value]="item.index" *ngFor="let item of catList"
                      >{{ item.value }}
                    </ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-col>
              <ion-col size="60">
                <ion-item>
                  <ion-label position="floating">Additional Info</ion-label>
                  <ion-input></ion-input>
                </ion-item>
              </ion-col>
              <ion-col size="10">
                <ion-icon name="close-circle" class="close-circle"></ion-icon>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
        <ion-col size="50">
          <ion-grid>
            <ion-row>
              <ion-col size="30">
                <ion-item>
                  <ion-label position="floating">Type</ion-label>
                  <ion-select interface="popover">
                    <ion-select-option [value]="item.index" *ngFor="let item of catList"
                      >{{ item.value }}
                    </ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-col>
              <ion-col size="60">
                <ion-item>
                  <ion-label position="floating">Additional Info</ion-label>
                  <ion-input></ion-input>
                </ion-item>
              </ion-col>
              <ion-col size="10">
                <ion-icon name="close-circle" class="close-circle"></ion-icon>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ng-template>

<ng-template #reportedBy>
  <form>
    <ion-grid>
      <ion-row>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">Who reported the fault?</ion-label>
            <ion-select interface="popover">
              <ion-select-option [value]="item.index" *ngFor="let item of catList"
                >{{ item.value }}
              </ion-select-option>
            </ion-select>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="66.6">
          <ion-item>
            <ion-label position="floating">Select agreement</ion-label>
            <ion-select interface="popover">
              <ion-select-option [value]="item.index" *ngFor="let item of catList"
                >{{ item.value }}
              </ion-select-option>
            </ion-select>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">Select tenant</ion-label>
            <ion-select interface="popover">
              <ion-select-option [value]="item.index" *ngFor="let item of catList"
                >{{ item.value }}
              </ion-select-option>
            </ion-select>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">Title</ion-label>
            <ion-input></ion-input>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">Forename</ion-label>
            <ion-input></ion-input>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">Surname</ion-label>
            <ion-input></ion-input>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">E-mail</ion-label>
            <ion-input></ion-input>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">Mobile</ion-label>
            <ion-input></ion-input>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">Telephone</ion-label>
            <ion-input></ion-input>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ng-template>

<ng-template #accessInformation>
  <form>
    <ion-grid>
      <ion-row>
        <ion-col size="33.3">
          <ion-item>
            <ion-label position="floating">Access information</ion-label>
            <ion-select interface="popover">
              <ion-select-option [value]="item.index" *ngFor="let item of catList"
                >{{ item.value }}
              </ion-select-option>
            </ion-select>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="65">
          <ion-item lines="none" style="margin-top: 6px;">
            <ion-label>Is there a vulnerable occupier at this property?</ion-label>
            <ion-toggle slot="start"></ion-toggle>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
        <ion-col size="100">
          <ion-item>
            <ion-label position="floating">Useful instructions</ion-label>
            <ion-input></ion-input>
          </ion-item>
          <!-- <app-validation-message [control]=""></app-validation-message> -->
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ng-template>

<ng-template #media>
  <form>
    <ion-grid>
      <ion-row>
        <form class="drop-zone" [formGroup]="uploadDocForm" file-drop (files)="submit($event)">
          <ion-icon class="icon" name="cloud-upload"></ion-icon>
          <input type="file" class="custom-file-input form-control" id="files" multiple (change)="submit($event.target.files)"
          accept="image/x-png,image/jpeg">
          <span class="drag-text">Drag files to upload here</span> <br>
          <label for="files" class="browse-btn">Browse Files</label>
        </form>
        <!-- <form [formGroup]="uploadDocForm" >
          <ion-row size="col-20">
            <div class="images-preview mt-2" *ngIf="photos.length">
              <div formArrayName="photos" *ngFor="let photo of photos.controls; let i = index;">
                <div [formGroupName]="i">
                  <img [src]="photo.controls.url.value" class="card-img-top" alt="Image Preview"  width="200px" height="200px">
                  <button (click)="removeFile(i)">Delete</button>
                </div>
              </div>
            </div>
          </ion-row>
        </form> -->
        <div class="delete-icon-wrapper" *ngFor="let file of files; let i=index;">
          <img [src]="file.url" width="250px" height="180px">
          <span class="file-name">{{file.name}}</span>
          <ion-icon (click)="removeFile(i)" class="delete-icon" name="close-circle"></ion-icon>
        </div>
      </ion-row>
      <button (click)="uploadFile()">Upload</button>
    </ion-grid>
  </form>
</ng-template>

<ng-template #FinalView>
  <ion-grid id="final-view">
    <ion-row class="ion-justify-content-between">
      <ion-col size="100">
        <div class="title">Please review case details and Start Progress when you’re ready</div>
      </ion-col>
      <ion-col size="100">
        <div class="sub-heading">Fault Details</div>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Fault Category</ion-text><br />
        <ion-text class="content">bvn</ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Urgency Status</ion-text><br />
        <ion-text class="content">f</ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Title</ion-text><br />
        <ion-text class="content">gfghrt</ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Fault Description</ion-text><br />
        <ion-text class="content">rtrt</ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Type</ion-text><br />
        <ion-text class="content">trt</ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Additional Info</ion-text><br />
        <ion-text class="content">ertret</ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Type</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Additional Info</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size="100" class="border-bottom"></ion-col>
      <ion-col size="100">
        <div class="sub-heading">Reported By</div>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Who reported the fault?</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Agreement</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Tenant</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Title</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Forename</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Surname</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">E-mail</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Mobile</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Telephone</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size="100" class="border-bottom"></ion-col>
      <ion-col size="100">
        <div class="sub-heading">Access Information</div>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Access Information</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Is there a vulnerable occupier at this property?</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size-xs="100" size-sm="50" class="header-content">
        <ion-text class="header">Useful Instruction</ion-text><br />
        <ion-text class="content"></ion-text>
      </ion-col>
      <ion-col size="100" class="border-bottom"></ion-col>
    </ion-row>
  </ion-grid>
</ng-template>

<ng-template #SubmitCancel>
  <ion-grid class="action-buttons-block ion-text-center">
    <ion-row>
      <ion-col>
        <ion-button color="danger" style="margin-left: 5px">Cancel</ion-button
        >&nbsp;&nbsp;
        <ion-button color="success"
          >Submit
          <ion-icon name="refresh" class="rotating submit-loader"></ion-icon>
        </ion-button>
        <ion-button color="success"
          >Update
          <ion-icon
            name="refresh"
            class="rotating submit-loader"
          ></ion-icon> </ion-button
        >&nbsp;&nbsp;
      </ion-col>
    </ion-row>
  </ion-grid>
</ng-template>

<ion-content id="fault-details">
  <ion-grid *ngIf="pageNo===1">
    <ion-row>
      <ion-col>
        <h2 class="heading">Log a fault</h2>
        <h2>
          What do you want to report in
          <b>
            {{ propertyData?.address?.addressLine1 ?
            propertyData?.address?.addressLine1 + ',' : ''}} {{
            propertyData?.address?.addressLine2 ?
            propertyData?.address?.addressLine2 + ',' : ''}} {{
            propertyData?.address?.locality ? propertyData?.address?.locality +
            ',' : ''}} {{ propertyData?.address?.postcode }} ?
          </b>
        </h2>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="20" *ngFor="let item of catList">
        <div class="block" (click)="goToPriorityPage(2)">
          <img [src]="item.imgPath" />
          <h4>{{item.value}}</h4>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid *ngIf="pageNo===2">
    <ion-row>
      <ion-col>
        <h2 class="heading">Log a fault</h2>
        <h2>
          Describe the issue with <b>Alarms and Smoke Detectors</b> in
          <b>
            {{ propertyData?.address?.addressLine1 ?
            propertyData?.address?.addressLine1 + ',' : ''}} {{
            propertyData?.address?.addressLine2 ?
            propertyData?.address?.addressLine2 + ',' : ''}} {{
            propertyData?.address?.locality ? propertyData?.address?.locality +
            ',' : ''}} {{ propertyData?.address?.postcode }} ?
          </b>
        </h2>
        <div class="priority-heading">Select the priority</div>
        <ion-button (click)="faultDetails.urgencyStatus = 1" [class]="faultDetails?.urgencyStatus===1 ? 'urgency-selected non-urgent-btn' : 'non-urgent-btn'">Non urgent</ion-button>
        <ion-button (click)="faultDetails.urgencyStatus = 2" [class]="faultDetails?.urgencyStatus===2 ? 'urgency-selected urgent-btn' : 'urgent-btn'">Urgent</ion-button>
        <ion-button (click)="faultDetails.urgencyStatus = 3" [class]="faultDetails?.urgencyStatus===3 ? 'urgency-selected emergency-btn' : 'emergency-btn'">Emergency</ion-button>
        <!-- <ion-button>Non urgent</ion-button>
        <ion-button>Urgent</ion-button>
        <ion-button>Emergency</ion-button> -->
      </ion-col>
    </ion-row>
  </ion-grid>
  <div class="panel-block-normal propco-form" *ngIf="pageNo===2">
    <ion-grid>
      <ion-row class="main-row">
        <ion-col size="100" class="col1">
          <ion-item>
            <ion-label position="floating">Title</ion-label>
            <ion-input type="text"> </ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="100" class="col2">
          <ion-button>Cancel</ion-button>
          <ion-button (click)="goToPriorityPage(1)">Back</ion-button>
          <ion-button (click)="goToPriorityPage(3)">Next</ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <ng-container *ngIf="pageNo===3">
    <ion-grid>
      <ion-row>
        <ion-col size="50">
          <h2 class="heading">Log a fault</h2>
        </ion-col>
        <ion-col size="50">
          <h2 class="heading-initial">Initial Issue &nbsp;<img src="assets/images/fault-categories/escalation.svg" /></h2>
        </ion-col>
      
        <ion-col size="100">
          <ion-card class="ion-no-margin" id="property-details-card">
            <form [formGroup]="uploadDocForm">
              <app-property-details (getUploadedFile)="getUploadedFile($event)" [files]="files" [parentForm]="uploadDocForm"
                [propertyDetails]="propertyData"> </app-property-details>
            </form>
          </ion-card>
        </ion-col>
        <ion-col size="100">
          <mat-horizontal-stepper
            #stepper
            labelPosition="bottom"
          >
            <mat-step>
              <ng-container *ngTemplateOutlet="caseDetails"></ng-container>
              <ng-container *ngTemplateOutlet="additionalInfo"></ng-container>
              <ng-template matStepLabel>Fault details</ng-template>
              
              <!-- <button mat-button matStepperNext mat-icon-button class="stepper-next"><img
                    src="assets/images/right-arrow-active.svg" /></button>
                <div class="blank-div">&nbsp;</div> -->
            </mat-step>
            <mat-step>
              <ng-container *ngTemplateOutlet="reportedBy"></ng-container>
              <ng-template matStepLabel>Reported By</ng-template>
              <!-- <button mat-button matStepperPrevious mat-icon-button class="stepper-back"><img
                    src="assets/images/left-arrow.svg" /></button>
                <button mat-button matStepperNext mat-icon-button class="stepper-next"><img
                    src="assets/images/right-arrow-active.svg" /></button>
                <div class="blank-div">&nbsp;</div> -->
            </mat-step>
            <mat-step>
              <ng-container *ngTemplateOutlet="accessInformation"></ng-container>
              <ng-template matStepLabel>Access Information</ng-template>
              <!-- <button mat-button matStepperPrevious mat-icon-button class="stepper-back"><img
                    src="assets/images/left-arrow.svg" /></button>
                <button mat-button matStepperNext mat-icon-button class="stepper-next"><img
                    src="assets/images/right-arrow-active.svg" /></button>
                <div class="blank-div">&nbsp;</div> -->
            </mat-step>
            <mat-step>
              <ng-container *ngTemplateOutlet="media"></ng-container>
              <ng-template matStepLabel>Media and Documents</ng-template>
              <!-- <button mat-button matStepperPrevious mat-icon-button class="stepper-back"><img
                    src="assets/images/left-arrow.svg" /></button>
                <button mat-button matStepperNext mat-icon-button class="stepper-next"><img
                    src="assets/images/right-arrow-active.svg" /></button>
                <div class="blank-div">&nbsp;</div> -->
            </mat-step>
            <mat-step>
              <ng-container *ngTemplateOutlet="FinalView"></ng-container>
              <ng-template matStepLabel>Review</ng-template>
              <!-- <button mat-button matStepperPrevious mat-icon-button class="stepper-back"><img
                    src="assets/images/left-arrow.svg" /></button>
                <button mat-button matStepperNext mat-icon-button class="stepper-next"><img
                    src="assets/images/right-arrow-active.svg" /></button>
                <div class="blank-div">&nbsp;</div> -->
            </mat-step>
          </mat-horizontal-stepper>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ng-container>

  <!-- <ion-grid *ngIf="pageNo===3">
    <ion-row>
      <ion-col>
        <ion-card class="ion-no-margin" id="property-details-card">
          <app-property-details [propertyDetails]="propertyData"></app-property-details>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid> -->
</ion-content>
